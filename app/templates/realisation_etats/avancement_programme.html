{% extends 'template.html' %}
{% load static %}

{% block content %}

<div class="main-title">Réalisation d'états d'avancement d'un programme</div>
<div class="row">
	<div class="br-md-after col-md-4">
		<form action="" method="post" name="form">
			{% csrf_token %}
			<fieldset class="my-fieldset">
				<legend>Rechercher par</legend>
				<div class="field-wrapper" id="fw_AvancementProgramme-id_progr">
					<span class="field-label">Programme</span>
					<span class="field-control">
						<select id="id_AvancementProgramme-id_progr" name="AvancementProgramme-id_progr" onchange="filterAxe()">
							<option value="all" selected="selected">---------</option>
							{% for programme in programmes %}
								<option value="{{ programme.id_progr }}">{{ programme.int_progr }}</option>
							{% endfor %}
						</select>
					</span>
					<span class="field-error"></span><br>
					<div class="field-wrapper" id="fw_AvancementProgramme-cbsm_org_moa">
						<span class="field-label">Maître(s) d'ouvrage(s)</span>
						<div class="my-table" id="dtab_AvancementProgramme-cbsm_org_moa">
							<div id="id_AvancementProgramme-cbsm_org_moa_wrapper" class="dataTables_wrapper no-footer">
								<table id="id_AvancementProgramme-cbsm_org_moa" class="dataTable no-footer" role="grid">
								<thead>
									<tr role="row">
										<th class="sorting" tabindex="0" aria-controls="id_AvancementProgramme-cbsm_org_moa"
											rowspan="1" colspan="1" aria-label="Nom: activate to sort column ascending">Nom</th>
										<th style="width: 1%;" class="sorting_disabled" rowspan="1" colspan="1" aria-label="">
											<input id="id_AvancementProgramme-cbsm_org_moa__all" value="__all__" type="checkbox">
										</th>
									</tr>
								</thead>
								<tbody>
									{% for row in org_moas %}
									<tr role="row" class="odd">
										<td>{{ row.id_org_moa_id }} - {{ row.dim_org_moa|default:"N/A" }}</td>
										<td><input id="id_AvancementProgramme-cbsm_org_moa_"+"{{row.id_org_moa_id}}"
											name="AvancementProgramme-cbsm_org_moa"+"{{row.id_org_moa_id}}" value="{{row.id_org_moa_id}}" type="checkbox"></td>
									</tr>
									{% endfor %}
								</tbody>
								</table>
							</div>
						</div>
						<span class="field-error"></span>
					</div>
					<div class="field-wrapper hide" id="fw_AvancementProgramme-zl_axe" style="display: block;">
						<span class="field-label">Axe</span>
						<span class="field-control">
							<select id="id_AvancementProgramme-zl_axe" name="AvancementProgramme-zl_axe">
								<option value="all" id_progr="all" selected="selected">---------</option>
								{% for axe in axes %}
								<option value="{{ axe.num_axe }}" id_progr="{{ axe.id_progr }}" intit="{{ axe.int_axe }}">{{ axe.num_axe }} - {{ axe.int_axe }}</option>
								{% endfor %}
								</option>
							</select>
						</span>
						<span class="field-error"></span>
					</div><br>
					<button type="submit" class="center-block green-btn my-btn">Valider</button>
				</div>
			</fieldset>
		</form>
	</div>
	<div class="col-md-8">
		<a href="?action=exporter-csv" class="csv-icon icon-link">Exporter au format CSV</a>
		<div class="my-table" id="t_select_doss">
			<table>
				<thead>
					<tr>
					{% for label in v_progs_detailles_complet_keys %}
						<th>{{ label }}</th>
					{% endfor %}
					</tr>
				</thead>
				<tbody>
				{% for row in v_progs_detailles_complet %}
					<tr>
						{% for key, value in row.items %}
							<td>{{ value|default:None }}</td>
						{% endfor %}
					</tr>
				{% endfor %}
				</tbody>
				<tfoot></tfoot>
			</table>
		</div>
		<br />
	</div>
</div>
{% endblock content %}
